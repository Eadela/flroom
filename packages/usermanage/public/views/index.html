<section data-ng-controller="UsermanageController" ; data-ng-init="t={}">
  <h1>用户角色管理</h1>
  <tabset>
    <tab heading="列出用户">
      <div class="loader" data-ng-init="init()" data-ng-hide="isEmpty()"></div>
      <br/>
      <span>搜索用户:</span>
      <input type="text" class="span2" data-ng-model="filerCategory" placeholder="Categories" autofocus />
      <input type="text" class="span2" data-ng-model="filerTitle" placeholder="Title" />
      <div class="pull-right actions-bar" data-ng-show="!isEmpty()">
        <span>用户:</span>
        <input type="button" class="btn btn-info" data-ng-hide="global.meanUserEditableMode" data-ng-click="global.meanUserEditableMode=!global.meanUserEditableMode" value="编辑">
        <input type="button" class="btn btn-success" data-ng-show="global.meanUserEditableMode" data-ng-click="global.meanUserEditableMode=!global.meanUserEditableMode" value="完成">
      </div>
      <table class="table table-striped table-bordered table-hover editable-table" data-ng-show="!isEmpty()">
        <tr>
          <th data-ng-show="global.meanUserEditableMode"></th>
          <th>Title
            <button data-ng-click="sort='title'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i>
            </button>
          </th>
          <!-- <th>Content</th> -->
          <th data-ng-repeat="lang in global.langs | orderBy: lang">{{lang.identifier}}</th>
          <th>Categories</th>
          <th>Created
            <button data-ng-click="sort='created'; reverse=!reverse"><i class="glyphicon glyphicon-sort"></i>
            </button>
          </th>
        </tr>
        <tr data-ng-repeat="User in global.Users| meanUsersToArray| orderBy:sort:reverse">
          <td data-ng-show="global.meanUserEditableMode">
            <button class="btn btn-danger" data-ng-click="remove(User)" value="del">
              <i class="glyphicon glyphicon-trash"></i>
            </button>
          </td>
          <td class="table-editable-cell">
            <span class="editable-span">{{User.title}}</span>
          </td>
          <td class="table-editable-cell" data-ng-repeat="lang in global.langs | orderBy:lang">
            <div mean-User="User.title" l="lang.identifier"></div>
          </td>
          <td class="table-editable-cell">
            <span data-ng-show="!global.meanUserEditableMode" class="editable-span" data-ng-repeat="category in User.categories">{{category}}
              <span data-ng-show="!$last">,</span>
            </span>
            <input data-ng-show="global.meanUserEditableMode" type="text" class="span2" data-ng-model="User.categories" placeholder="Categories" autofocus />
          </td>
          <td>{{User.created | date:'medium'}}</td>
        </tr>
      </table>

    </tab>
    <tab heading="创建用户">
      <form class="row-fluid form-inline" name="addUserForm" data-ng-submit="create()" data-ng-init="content={}">
        <div class="">
          <input type="text" class="span2" data-ng-model="title" placeholder="Title" autofocus />
          <input type="text" class="span2" data-ng-repeat="l in global.langs" data-ng-model="content[l.identifier]" placeholder="Content - {{l.identifier}}" />
          <input type="text" class="span2" data-ng-model="categories" placeholder="Categories" />
          <input type="submit" class="btn span1" value="SAVE" />
        </div>
      </form>
    </tab>
  </tabset>
</section>
